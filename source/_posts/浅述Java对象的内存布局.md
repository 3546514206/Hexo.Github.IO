---
title: 浅述Java对象的内存布局
date: 2023-12-05 16:37:21
tags:
- Java
---

&ensp;&ensp;&ensp;&ensp; Java的实例对象、数组对象在内存中的组成包括如下三部分：对象头Hearder、实例数据、内存填充。示意图如下所示： 

![对象头结构](/pic/基本功/编程基础/浅述Java对象的内存布局/对象头结构.png)

* 对象头：其主要包括两部分数据：Mark Word、Class对象指针。特别地对于数组对象而言，其还包括了数组长度数据。在64位的HotSpot虚拟机下，Mark Word占8个字节，其记录了Hash Code、GC信息、锁信息等相关信息；而Class对象指针则指向该实例的Class对象，在开启指针压缩的情况下占用4个字节，否则占8个字节；如果其是一个数组对象，则还需要4个字节用于记录数组长度信息。这里列出64位HotSpot虚拟机Mark Word的具体含义，以供参考。需要注意的是在下图的Mark Word中，左侧为高字节，右侧为低字节。

![对象头细节](/pic/基本功/编程基础/浅述Java对象的内存布局/对象头细节.jpg)

* 实例数据：用于存放该对象的实例数据。

* 内存填充：64位的HotSpot要求Java对象地址按8字节对齐，即每个对象所占内存的字节数必须是8字节的整数倍。因此Java对象需要通过内存填充来满足对齐要求。